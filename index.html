<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body style="background: slategray;">

    <script>

        // Closer program
        function OuterFunction() {
            const outer = 'im from outer function';

            function innerFunc() {
                return outer;
            }

            return innerFunc;
        }

        const value = OuterFunction();
        console.log(value());

        // Promises program
        let promise = new Promise((resolve, reject) => {
            setTimeout(() => {
                let success = true;
                if (success) { resolve("Promise resolve") }
                else { reject("Promise rejected") }
            }, 1000)
        })

        promise.then((result) => {
            console.log(result);
        }).catch((err) => {
            console.log(err);
        })


        // Callbacks
        function fetchData(callbacks) {
            setTimeout(() => {
                callbacks('Data received');
            }, 1500)
        }

        fetchData((data) => {
            console.log(data);
        })

        // fetch data using callback xhr
        // function DataFetching(url,callback){
        //     const xhr = new XMLHttpRequest();

        //     xhr.open('GET',url ,true); // asynhronous operations

        //     xhr.onreadystatechange = () => {
        //         if(xhr.readyState === 4){
        //             if(xhr.status === 200){
        //                 const data = JSON.parse(xhr.responseText);
        //                 callback(null,data);
        //             }
        //             else {
        //                 callback(new Error(`Error : ${xhr.status}`))
        //             }
        //         }
        //     };
        //     xhr.send();
        // }

        // DataFetching('https://api.example.com/data', function(err,data) {
        //     if(err){console.error(err)}
        //     else{console.log(data);}
        // })

        // async await 
        async function AsyncfetchData() {
            try {
                let data = await new Promise((resolve, reject) => {
                    setTimeout(() => {
                        let success = false;
                        if (success) { resolve("Resolve successfully"); }
                        else { reject("promise rejected") }
                    }, 2000)
                })
                console.log(data);
            }
            catch (err) { console.log(err); }
        } AsyncfetchData()

    </script>

</body>

</html>